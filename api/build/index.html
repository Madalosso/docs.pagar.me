<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Referência da API - Pagar.me</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["shell","ruby","php","csharp"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="csharp">csharp</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introducao'>Introdução</h1>
<p>Bem-vindo ao guia de referências da API do <a href="https://pagar.me/">Pagar.me</a>! É através desta API que você irá integrar seu sistema ao nosso, e, além disso, você também pode recriar as funcionalidades existentes na nossa dashboard, que são feitas consumindo a API que será aqui descrita.</p>

<p>A primeira coisa que você deve saber é o endpoint que usamos:</p>

<p><code class="prettyprint">https://api.pagar.me/1/</code></p>

          <h1 id='transacoes'>Transações</h1>
<p>Através da rota <code class="prettyprint">/transactions</code> e suas derivadas, você pode criar transações, estornar, capturar, dentre outras atividades relacionadas a estas.</p>
<h2 id='objeto-transaction'>Objeto <code class="prettyprint">transaction</code></h1>
<blockquote>
<p>Objeto transaction</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"processing"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"refuse_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acquirer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"acquirer_response_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"authorization_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"soft_descriptor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testeDeAPI"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"tid"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"nsu"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-25T21:54:56.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-25T21:54:56.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">310000</span><span class="p">,</span><span class="w">
  </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">184220</span><span class="p">,</span><span class="w">
  </span><span class="nt">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"postback_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://requestb.in/pkt7pgpk"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit_card"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"antifraud_score"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"boleto_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"boleto_barcode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"boleto_expiration_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"referer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api_key"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"189.8.94.42"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"subscription_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card_ci6l9fx8f0042rt16rtb477gj"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-25T21:54:56.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-25T21:54:56.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mastercard"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Api Customer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_digits"</span><span class="p">:</span><span class="w"> </span><span class="s2">"548045"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_digits"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3123"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fingerprint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HSiLJan2nqwn"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"valid"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"nomeData"</span><span class="p">:</span><span class="w"> </span><span class="s2">"API Doc Test"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"idData"</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Ao criar ou atualizar uma transação, este será o objeto que você irá receber como resposta em cada etapa do processo de efetivação da transação.</p>

<table><thead>
<tr>
<th style="text-align: right">Parâmetro</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>object</strong><br> String</td>
<td style="text-align: left">Nome do tipo do objeto criado/modificado. <br> <strong>Valor retornado</strong>: <code class="prettyprint">transaction</code></td>
</tr>
<tr>
<td style="text-align: right"><strong>status</strong><br> String</td>
<td style="text-align: left">Para cada atualização no processamento da transação, esta propriedade será alterada, e o objeto <code class="prettyprint">transaction</code> retornado como resposta através da sua URL de <em>postback</em> ou após o término do processamento da ação atual. <br> <strong>Valores possíveis</strong>: <code class="prettyprint">processing</code>, <code class="prettyprint">authorized</code>, <code class="prettyprint">paid</code>, <code class="prettyprint">refunded</code>, <code class="prettyprint">waiting_payment</code>, <code class="prettyprint">pending_refund</code>, <code class="prettyprint">refused</code></td>
</tr>
<tr>
<td style="text-align: right"><strong>status_reason</strong><br> String</td>
<td style="text-align: left">Motivo/agente responsável pela validação ou anulação da transação. <br> <strong>Valores possíveis</strong>: <code class="prettyprint">acquirer</code>, <code class="prettyprint">antifraud</code>, <code class="prettyprint">internal_error</code>, <code class="prettyprint">no_acquirer</code>, <code class="prettyprint">acquirer_timeout</code></td>
</tr>
<tr>
<td style="text-align: right"><strong>acquirer_response_code</strong><br> String</td>
<td style="text-align: left">Mensagem de resposta do adquirente referente ao status da transação.</td>
</tr>
<tr>
<td style="text-align: right"><strong>authorization_code</strong><br> String</td>
<td style="text-align: left">Código de autorização retornado pela bandeira.</td>
</tr>
<tr>
<td style="text-align: right"><strong>soft_descriptor</strong><br> String</td>
<td style="text-align: left">Texto que irá aparecer na fatura do cliente depois do nome da loja. <br> <strong>OBS</strong>: Limite de 13 caracteres.</td>
</tr>
<tr>
<td style="text-align: right"><strong>tid</strong><br> String</td>
<td style="text-align: left">Código que identifica a transação no adquirente.</td>
</tr>
<tr>
<td style="text-align: right"><strong>nsu</strong><br> String</td>
<td style="text-align: left">Código que identifica a transação no adquirente.</td>
</tr>
<tr>
<td style="text-align: right"><strong>date_created</strong><br> String</td>
<td style="text-align: left">Data de criação da transação no formato ISODate</td>
</tr>
<tr>
<td style="text-align: right"><strong>date_updated</strong><br> String</td>
<td style="text-align: left">Data de atualização da transação no formato ISODate</td>
</tr>
<tr>
<td style="text-align: right"><strong>amount</strong><br> Number</td>
<td style="text-align: left">Valor, em centavos, da transação</td>
</tr>
<tr>
<td style="text-align: right"><strong>installments</strong><br> Number</td>
<td style="text-align: left">Número de parcelas/prestações a serem cobradas</td>
</tr>
<tr>
<td style="text-align: right"><strong>id</strong><br> Number</td>
<td style="text-align: left">Número identificador da transação</td>
</tr>
<tr>
<td style="text-align: right"><strong>cost</strong><br> Number</td>
<td style="text-align: left">Custo da transação para o lojista</td>
</tr>
<tr>
<td style="text-align: right"><strong>postback_url</strong><br> String</td>
<td style="text-align: left">URL (endpoint) do sistema integrado a Pagar.me que receberá as respostas a cada atualização do processamento da transação</td>
</tr>
<tr>
<td style="text-align: right"><strong>payment_method</strong><br> String</td>
<td style="text-align: left">Método de pagamento possíveis: <code class="prettyprint">credit_card</code> e <code class="prettyprint">boleto</code></td>
</tr>
<tr>
<td style="text-align: right"><strong>boleto_url</strong><br> String</td>
<td style="text-align: left">URL do boleto para impressão</td>
</tr>
<tr>
<td style="text-align: right"><strong>boleto_barcode</strong><br> String</td>
<td style="text-align: left">Código de barras do boleto gerado na transação</td>
</tr>
<tr>
<td style="text-align: right"><strong>boleto_expiration_date</strong><br> String</td>
<td style="text-align: left">Data de expiração do boleto (em ISODate)</td>
</tr>
<tr>
<td style="text-align: right"><strong>referer</strong><br> String</td>
<td style="text-align: left">Mostra se a transação foi criada utilizando a API Key ou Encryption Key.</td>
</tr>
<tr>
<td style="text-align: right"><strong>ip</strong><br> String</td>
<td style="text-align: left">IP de origem que criou a transção, podendo ser ou do seu cliente (quando criado via checkout ou utilizando card_hash) ou do servidor.</td>
</tr>
<tr>
<td style="text-align: right"><strong>subscription_id</strong><br> Number</td>
<td style="text-align: left">Caso essa transação tenha sido originada na cobrança de uma assinatura, o <code class="prettyprint">id</code> desta será o valor dessa propriedade</td>
</tr>
<tr>
<td style="text-align: right"><strong>phone</strong><br> Object</td>
<td style="text-align: left">Objeto com dados do telefone do cliente</td>
</tr>
<tr>
<td style="text-align: right"><strong>address</strong><br> Object</td>
<td style="text-align: left">Objeto com dados do endereço do cliente</td>
</tr>
<tr>
<td style="text-align: right"><strong>customer</strong><br> Object</td>
<td style="text-align: left">Objeto com dados do cliente</td>
</tr>
<tr>
<td style="text-align: right"><strong>card</strong><br> Object</td>
<td style="text-align: left">Objeto com dados do cartão do cliente</td>
</tr>
<tr>
<td style="text-align: right"><strong>metadata</strong><br> Object</td>
<td style="text-align: left">Objeto com dados adicionais do cliente/produto/serviço vendido</td>
</tr>
</tbody></table>
<h2 id='criando-uma-transacao'>Criando uma transação</h1>
<blockquote>
<p>POST https://api.pagar.me/1/transactions</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.pagar.me/1/transactions <span class="se">\</span>
-d <span class="s1">'api_key=ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0'</span> <span class="se">\</span>
-d <span class="s1">'amount=3100'</span> <span class="se">\</span>
-d <span class="s1">'card_id=card_ci6l9fx8f0042rt16rtb477gj'</span> <span class="se">\</span>
-d <span class="s1">'postback_url=http://requestb.in/pkt7pgpk'</span> <span class="se">\</span>
-d <span class="s1">'metadata[idProduto]=13933139'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'pagarme'</span>

<span class="no">PagarMe</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0"</span><span class="p">;</span>

<span class="n">transaction</span> <span class="o">=</span> <span class="no">PagarMe</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span><span class="p">({</span>
    <span class="ss">:amount</span> <span class="o">=&gt;</span> <span class="mi">3100</span><span class="p">,</span>
    <span class="ss">:card_id</span> <span class="o">=&gt;</span> <span class="s2">"card_ci6l9fx8f0042rt16rtb477gj"</span><span class="p">,</span>
    <span class="ss">:postback_url</span> <span class="o">=&gt;</span> <span class="s2">"http://requestb.in/pkt7pgpk"</span><span class="p">,</span>
    <span class="ss">:metadata</span><span class="p">[</span><span class="n">idProduto</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">13933139</span>
<span class="p">})</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">charge</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
    <span class="k">require</span><span class="p">(</span><span class="s2">"pagarme-php/Pagarme.php"</span><span class="p">);</span>

    <span class="nx">Pagarme</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s2">"ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0"</span><span class="p">);</span>

    <span class="nv">$transaction</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PagarMe_Transaction</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="mi">3100</span><span class="p">,</span>
        <span class="s2">"card_id"</span> <span class="o">=&gt;</span> <span class="s2">"card_ci6l9fx8f0042rt16rtb477gj"</span><span class="p">,</span>
        <span class="s2">"postback_url"</span> <span class="o">=&gt;</span> <span class="s2">"http://requestb.in/pkt7pgpk"</span><span class="p">,</span>
        <span class="s2">"metadata"</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s2">"idProduto"</span> <span class="o">=&gt;</span> <span class="mi">13933139</span>
        <span class="p">)</span>
    <span class="p">));</span>

    <span class="nv">$transaction</span><span class="o">-&gt;</span><span class="na">charge</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</code></pre>
<pre class="highlight csharp"><code><span class="n">PagarMeService</span><span class="p">.</span><span class="n">DefaultApiKey</span> <span class="p">=</span> <span class="s">"ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0"</span><span class="p">;</span>

<span class="n">Transaction</span> <span class="n">transaction</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Transaction</span><span class="p">();</span>

<span class="n">transaction</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="m">3100</span><span class="p">;</span>
<span class="n">transaction</span><span class="p">.</span><span class="n">CardId</span> <span class="p">=</span> <span class="s">"card_ci6l9fx8f0042rt16rtb477gj"</span><span class="p">;</span>
<span class="n">transaction</span><span class="p">.</span><span class="n">PostbackUrl</span> <span class="p">=</span> <span class="s">"http://requestb.in/pkt7pgpk"</span><span class="p">;</span>
<span class="n">transaction</span><span class="p">.</span><span class="n">Metadata</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Metadata</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">IdProduto</span> <span class="p">=</span> <span class="m">13933139</span>
<span class="p">};</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">Save</span><span class="p">();</span>
</code></pre>

<p>Para fazer uma cobrança, você deve usar a rota <code class="prettyprint">/transactions</code> para criar sua transação, que pode ser feita por cartão de crédito ou por boleto bancário.</p>

<blockquote>
<p>JSON retornado (exemplo):</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"processing"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"refuse_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acquirer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"acquirer_response_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"authorization_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"soft_descriptor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testeDeAPI"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"tid"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"nsu"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-25T21:54:56.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-25T21:54:56.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">310000</span><span class="p">,</span><span class="w">
  </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">184220</span><span class="p">,</span><span class="w">
  </span><span class="nt">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"postback_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://requestb.in/pkt7pgpk"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit_card"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"antifraud_score"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"boleto_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"boleto_barcode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"boleto_expiration_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"referer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api_key"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"189.8.94.42"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"subscription_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card_ci6l9fx8f0042rt16rtb477gj"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-25T21:54:56.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-25T21:54:56.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mastercard"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Api Customer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_digits"</span><span class="p">:</span><span class="w"> </span><span class="s2">"548045"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_digits"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3123"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fingerprint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HSiLJan2nqwn"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"valid"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"idProduto"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13933139"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th style="text-align: right">Parâmetro</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>api_key</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Chave da API (disponível no seu dashboard)</td>
</tr>
<tr>
<td style="text-align: right"><strong>amount</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Valor a ser cobrado. Deve ser passado em centavos. Ex: R$ 10.00 = <code class="prettyprint">1000</code></td>
</tr>
<tr>
<td style="text-align: right"><strong>card_hash</strong><br> <span class="required">obrigatório*</span></td>
<td style="text-align: left">Informações do cartão do cliente criptografadas no navegador. <br><strong>OBS</strong>: Apenas para transações de <strong>cartão de crédito</strong> você deve passar <strong>ou</strong> o  <code class="prettyprint">card_hash</code> <strong>ou</strong> o  <code class="prettyprint">card_id</code></td>
</tr>
<tr>
<td style="text-align: right"><strong>card_id</strong><br> <span class="required">obrigatório*</span></td>
<td style="text-align: left">Ao realizar uma transação, retornamos o <code class="prettyprint">card_id</code> do cartão para que nas próximas transações desse cartão possa ser utilizado esse identificador ao invés do <code class="prettyprint">card_hash</code></td>
</tr>
<tr>
<td style="text-align: right"><strong>payment_method</strong><br> default: <code class="prettyprint">credit_card</code></td>
<td style="text-align: left">Aceita dois tipos de pagamentos/valores: <code class="prettyprint">credit_card</code> e <code class="prettyprint">boleto</code></td>
</tr>
<tr>
<td style="text-align: right"><strong>postback_url</strong></td>
<td style="text-align: left">Endpoint do seu sistema que receberá informações a cada atualização da transação</td>
</tr>
<tr>
<td style="text-align: right"><strong>installments</strong><br> mínimo: 1, máximo: 12</td>
<td style="text-align: left">Se o pagamento for boleto, o padrão é 1</td>
</tr>
<tr>
<td style="text-align: right"><strong>boleto_expiration_date</strong><br> default: data atual + 7 dias</td>
<td style="text-align: left">Prazo limite para pagamento do boleto</td>
</tr>
<tr>
<td style="text-align: right"><strong>soft_descriptor</strong></td>
<td style="text-align: left">Descrição que aparecerá na fatura depois do nome da loja. Máximo de 13 caracteres</td>
</tr>
<tr>
<td style="text-align: right"><strong>capture</strong><br> default: <code class="prettyprint">true</code></td>
<td style="text-align: left">Após a autorização de uma transação, você pode escolher se irá capturar ou adiar a captura do valor. Caso opte por postergar a captura, atribuir o valor <code class="prettyprint">false</code></td>
</tr>
<tr>
<td style="text-align: right"><strong>metadata</strong></td>
<td style="text-align: left">Você pode passar dados adicionais na criação da transação para posteriormente filtrar estas na nossa dashboard. Ex: <code class="prettyprint">metadata[ idProduto ]=13933139</code></td>
</tr>
<tr>
<td style="text-align: right"><strong>customer[name]</strong><br> <span class="required">obrigatório* (com antifraude)</span></td>
<td style="text-align: left">Nome completo ou razão social do cliente que está realizando a transação</td>
</tr>
<tr>
<td style="text-align: right"><strong>customer[document_number]</strong><br> <span class="required">obrigatório* (com antifraude)</span></td>
<td style="text-align: left">CPF ou CNPJ do cliente, sem separadores</td>
</tr>
<tr>
<td style="text-align: right"><strong>customer[email]</strong><br> <span class="required">obrigatório* (com antifraude)</span></td>
<td style="text-align: left">email do cliente</td>
</tr>
<tr>
<td style="text-align: right"><strong>customer[address][street]</strong><br> <span class="required">obrigatório* (com antifraude)</span></td>
<td style="text-align: left">logradouro (rua, avenida, etc) do cliente</td>
</tr>
<tr>
<td style="text-align: right"><strong>customer[address][street_number]</strong><br> <span class="required">obrigatório* (com antifraude)</span></td>
<td style="text-align: left">Número da residência/estabelecimento do cliente</td>
</tr>
<tr>
<td style="text-align: right"><strong>customer[address][complementary]</strong><br> <span class="required">obrigatório* (com antifraude)</span></td>
<td style="text-align: left">complemento do endereço do cliente</td>
</tr>
<tr>
<td style="text-align: right"><strong>customer[address][neighborhood]</strong><br> <span class="required">obrigatório* (com antifraude)</span></td>
<td style="text-align: left">bairro de localização do cliente</td>
</tr>
<tr>
<td style="text-align: right"><strong>customer[address][zipcode]</strong><br> <span class="required">obrigatório* (com antifraude)</span></td>
<td style="text-align: left">CEP do imóvel do cliente, sem separadores</td>
</tr>
<tr>
<td style="text-align: right"><strong>customer[phone][ddd]</strong><br> <span class="required">obrigatório* (com antifraude)</span></td>
<td style="text-align: left">DDD do telefone do cliente</td>
</tr>
<tr>
<td style="text-align: right"><strong>customer[phone][number]</strong><br> <span class="required">obrigatório* (com antifraude)</span></td>
<td style="text-align: left">número de telefone do cliente</td>
</tr>
<tr>
<td style="text-align: right"><strong>customer[sex]</strong><br> <code class="prettyprint">M</code> ou <code class="prettyprint">F</code> (letras maiúsculas)</td>
<td style="text-align: left">sexo do cliente</td>
</tr>
<tr>
<td style="text-align: right"><strong>customer[born_at]</strong><br> Formato: <code class="prettyprint">MM-DD-AAAA</code></td>
<td style="text-align: left">Data de nascimento do cliente. Ex: 11-02-1985</td>
</tr>
<tr>
<td style="text-align: right"><strong>split_rules</strong></td>
<td style="text-align: left">Esse parâmetro é um <code class="prettyprint">Array</code> que irá conter as regras da divisão do valor transacionado. <br> <strong>OBS</strong>: Caso você deseje incluir mais regras, passe os parâmetros abaixo alterando o índice em <code class="prettyprint">+1</code> para cada nova regra/recebedor</td>
</tr>
<tr>
<td style="text-align: right"><strong>split_rules[n][recipient_id]</strong></td>
<td style="text-align: left">Identificador do <a href="/#recebedores">recebedor</a></td>
</tr>
<tr>
<td style="text-align: right"><strong>split_rules[n][charge_processing_fee]</strong><br> default: <code class="prettyprint">true</code></td>
<td style="text-align: left">Indica se o recebedor vinculado a essa regra de divisão será cobrado pelas taxas da transação</td>
</tr>
<tr>
<td style="text-align: right"><strong>split_rules[n][liable]</strong><br> default: <code class="prettyprint">true</code></td>
<td style="text-align: left">Indica se o recebedor vinculado a essa regra de divisão assumirá o risco da transação, ou seja, possíveis estornos (<em>chargeback</em>)</td>
</tr>
<tr>
<td style="text-align: right"><strong>split_rules[n][percentage]</strong><br> <span class="required">obrigatório*</span></td>
<td style="text-align: left">Define a porcentagem a ser recebida pelo recebedor configurado na regra. <br> <strong>OBS</strong>: se for utilizado a propriedade <code class="prettyprint">percentage</code>, a propriedade <code class="prettyprint">amount</code> não será necessária</td>
</tr>
<tr>
<td style="text-align: right"><strong>split_rules[n][amount]</strong><br> <span class="required">obrigatório*</span></td>
<td style="text-align: left">Define o valor a ser recebido pelo recebedor configurado na regra. <br> <strong>OBS</strong>: se for utilizado a propriedade <code class="prettyprint">amount</code>, a propriedade <code class="prettyprint">percentage</code> não será necessária</td>
</tr>
</tbody></table>

<p><strong>OBS</strong>: Caso você vá usar o recurso antifraude, é <strong>obrigatório</strong> passar os dados do cliente na hora da criação da transação, como explicado <a href="https://pagar.me/docs/transactions/#customer-data">aqui</a>.</p>
<h2 id='retornando-uma-transacao'>Retornando uma Transação</h1>
<blockquote>
<p>GET https://api.pagar.me/1/transactions/:id</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.pagar.me/1/transactions/194351 <span class="se">\</span>
-d <span class="s1">'api_key=ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'pagarme'</span>

<span class="no">PagarMe</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0"</span>

<span class="n">transaction</span> <span class="o">=</span> <span class="no">PagarMe</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="s2">"184270"</span><span class="p">)</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
    <span class="k">require</span><span class="p">(</span><span class="s2">"pagarme-php/Pagarme.php"</span><span class="p">);</span>

    <span class="nx">Pagarme</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s2">"ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0"</span><span class="p">);</span>

    <span class="nv">$transaction</span> <span class="o">=</span> <span class="nx">PagarMe_Transaction</span><span class="o">::</span><span class="na">findById</span><span class="p">(</span><span class="s2">"184270"</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<pre class="highlight csharp"><code></code></pre>

<p>Retorna os dados de uma transação realizada.</p>

<blockquote>
<p>JSON Retornado (exemplo):</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refuse_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acquirer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"acquirer_response_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"acquirer_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"development"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"authorization_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"soft_descriptor"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"tid"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"nsu"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-26T15:35:32.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-26T15:35:47.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">25000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">184270</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">115</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postback_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boleto"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"antifraud_score"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://pagar.me"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_barcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234 5678"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_expiration_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-02T03:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"referer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"session_id"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"189.8.94.42"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subscription_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th style="text-align: right">Parâmetro</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>api_key</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Chave da API (disponível no seu dashboard)</td>
</tr>
<tr>
<td style="text-align: right"><strong>:id</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">id da transação previamente criada</td>
</tr>
</tbody></table>
<h2 id='retornando-transacoes'>Retornando transações</h1>
<blockquote>
<p>GET https://api.pagar.me/1/transactions</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.pagar.me/1/transactions <span class="se">\</span>
-d <span class="s1">'api_key=ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0'</span> <span class="se">\</span>
-d <span class="s1">'count=3'</span> <span class="se">\</span>
-d <span class="s1">'page=3'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'pagarme'</span>

<span class="no">PagarMe</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0"</span>

<span class="n">transactions</span> <span class="o">=</span> <span class="no">PagarMe</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
    <span class="k">require</span><span class="p">(</span><span class="s2">"pagarme-php/Pagarme.php"</span><span class="p">);</span>

    <span class="nx">Pagarme</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s2">"ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0"</span><span class="p">);</span>

    <span class="nv">$transaction</span> <span class="o">=</span> <span class="nx">PagarMe_Transaction</span><span class="o">::</span><span class="na">all</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<pre class="highlight csharp"><code></code></pre>

<p>Retorna um <code class="prettyprint">Array</code> contendo objetos de transações, ordenadas a partir da transação realizada mais recentemente.</p>

<blockquote>
<p>JSON Retornado (exemplo):</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refused"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refuse_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acquirer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acquirer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"acquirer_response_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"acquirer_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"development"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"authorization_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"soft_descriptor"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"tid"</span><span class="p">:</span><span class="w"> </span><span class="mi">1425933798340</span><span class="p">,</span><span class="w">
    </span><span class="nt">"nsu"</span><span class="p">:</span><span class="w"> </span><span class="mi">1425933798340</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-09T20:43:17.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-09T20:43:18.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">54496</span><span class="p">,</span><span class="w">
    </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">185679</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postback_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit_card"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"antifraud_score"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_barcode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_expiration_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"referer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"encryption_key"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"179.185.132.108"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subscription_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card_ci1u3yidd00036t16wkzev8s8"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-10-29T03:12:50.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-07T19:43:08.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"murilo junqueira"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"first_digits"</span><span class="p">:</span><span class="w"> </span><span class="s2">"411111"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"last_digits"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1111"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"fingerprint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HEiFgPIQJqXG"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"valid"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"authorized"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refuse_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acquirer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"acquirer_response_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"acquirer_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"development"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"authorization_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"soft_descriptor"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"tid"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"nsu"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-09T20:41:20.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-09T20:41:20.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">185676</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postback_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boleto"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"antifraud_score"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_barcode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_expiration_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-16T03:00:00.126Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"referer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"encryption_key"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"177.157.206.15"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subscription_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"authorized"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refuse_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acquirer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"acquirer_response_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"acquirer_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"development"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"authorization_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"854653"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"soft_descriptor"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"tid"</span><span class="p">:</span><span class="w"> </span><span class="mi">1425933651790</span><span class="p">,</span><span class="w">
    </span><span class="nt">"nsu"</span><span class="p">:</span><span class="w"> </span><span class="mi">1425933651790</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-09T20:40:51.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-09T20:40:51.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">185675</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postback_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit_card"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"antifraud_score"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_barcode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_expiration_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"referer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"encryption_key"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"177.157.206.15"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subscription_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card_ci6ttnn2y007n5616jhotcfof"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-03T21:42:58.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-09T20:06:15.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mastercard"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Appleseed"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"first_digits"</span><span class="p">:</span><span class="w"> </span><span class="s2">"590072"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"last_digits"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4446"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"fingerprint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XHLU9UYzU3+x"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"valid"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th style="text-align: right">Parâmetro</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>api_key</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Chave da API (disponível no seu dashboard)</td>
</tr>
<tr>
<td style="text-align: right"><strong>count</strong><br> default: <code class="prettyprint">10</code></td>
<td style="text-align: left">Retorna <code class="prettyprint">n</code> objetos de transação</td>
</tr>
<tr>
<td style="text-align: right"><strong>page</strong><br> default: <code class="prettyprint">1</code></td>
<td style="text-align: left">Útil para implementação de uma paginação de resultados</td>
</tr>
</tbody></table>

<p><strong>OBS</strong>: Você pode passar qualquer propriedade e valor presentes nos objetos <code class="prettyprint">transaction</code> como parâmetro de busca/filtro nesta rota.</p>

<p><strong>Ex</strong>: <code class="prettyprint">card_last_digits=4242</code></p>
<h2 id='gerando-uma-nova-chave-para-encriptacao-do-card_hash'>Gerando uma nova chave para encriptação do <code class="prettyprint">card_hash</code></h1>
<blockquote>
<p>GET https://api.pagar.me/1/transactions/card_hash_key</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.pagar.me/1/transactions/card_hash_key <span class="se">\</span>
-d <span class="s1">'encryption_key=ek_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'pagarme'</span>

<span class="no">PagarMe</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0"</span>

<span class="n">key</span> <span class="o">=</span> <span class="no">PagarMe</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">generate_card_hash</span><span class="p">()</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
    <span class="k">require</span><span class="p">(</span><span class="s2">"pagarme-php/Pagarme.php"</span><span class="p">);</span>

    <span class="nx">Pagarme</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s2">"ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0"</span><span class="p">);</span>

    <span class="nv">$t</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PagarMe_Transaction</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
      <span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="mi">3100</span><span class="p">,</span>
      <span class="s2">"card_id"</span> <span class="o">=&gt;</span> <span class="s2">"card_ci6l9fx8f0042rt16rtb477gj"</span><span class="p">,</span>
      <span class="s2">"postback_url"</span> <span class="o">=&gt;</span> <span class="s2">"http://requestb.in/1ahq78t1"</span><span class="p">,</span>
      <span class="s2">"metadata"</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s2">"idProduto"</span> <span class="o">=&gt;</span> <span class="mi">13933139</span>
       <span class="p">)</span>
    <span class="p">));</span>

    <span class="nv">$key</span> <span class="o">=</span> <span class="nv">$t</span><span class="o">-&gt;</span><span class="na">generateCardHash</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</code></pre>
<pre class="highlight csharp"><code>
</code></pre>

<p>Caso você queira/precise criar o <code class="prettyprint">card_hash</code> manualmente, essa rota deverá ser utilizada para obtenção de uma chave pública de encriptação dos dados do cartão de seu cliente.</p>

<p>Saiba mais sobre como criar um <code class="prettyprint">card_hash</code> <a href="https://pagar.me/docs/capturing-card-data/#capturando-os-dados-em-uma-pgina-web">aqui</a>.</p>

<blockquote>
<p>JSON Retornado (Exemplo)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-27T15:44:26.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">111111</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000.0.00.00"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"public_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN PUBLIC KEY-----\ -----END PUBLIC KEY-----\ "</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th style="text-align: right">Parâmetro</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>encryption_key</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Chave de encriptação (disponível no seu dashboard)</td>
</tr>
</tbody></table>
<h2 id='retornando-as-regras-de-divisao-de-uma-transacao'>Retornando as regras de divisão de uma transação</h1>
<blockquote>
<p>GET https://api.pagar.me/1/transactions/:transaction_id/split_rules</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.pagar.me/1/transactions/189164/split_rules <span class="se">\</span>
-d <span class="s1">'api_key=ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0'</span>
</code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight csharp"><code></code></pre>

<p>Retorna os dados das regras de divisão do valor transacionado.</p>

<blockquote>
<p>JSON Retornado (exemplo):</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"split_rule"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sr_ci7ntawl1001s2m164zrbp7tz"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"recipient_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"re_ci7nhf1ay0007n016wd5t22nl"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"charge_processing_fee"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"liable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"percentage"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-24T21:26:09.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-24T21:26:09.000Z"</span><span class="w">
</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"split_rule"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sr_ci7ntawl1001t2m1606u3e0uw"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"recipient_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"re_ci7nheu0m0006n016o5sglg9t"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"charge_processing_fee"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"liable"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"percentage"</span><span class="p">:</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-24T21:26:09.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-24T21:26:09.000Z"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th style="text-align: right">Parâmetro</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>api_key</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Chave da API (disponível no seu dashboard)</td>
</tr>
<tr>
<td style="text-align: right"><strong>:transaction_id</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">id da transação previamente criada</td>
</tr>
</tbody></table>
<h2 id='retornando-uma-regra-de-divisao-especifica'>Retornando uma regra de divisão específica</h1>
<blockquote>
<p>GET https://api.pagar.me/1/transactions/:transaction_id/split_rules/:id</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.pagar.me/1/transactions/189164/split_rules/sr_ci7ntawl1001s2m164zrbp7tz <span class="se">\</span>
-d <span class="s1">'api_key=ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0'</span>
</code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight csharp"><code></code></pre>

<p>Retorna os dados de uma regra de divisão de uma determinada transaçào.</p>

<blockquote>
<p>JSON Retornado (exemplo):</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"split_rule"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sr_ci7ntawl1001s2m164zrbp7tz"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"recipient_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"re_ci7nhf1ay0007n016wd5t22nl"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"charge_processing_fee"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"liable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"percentage"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-24T21:26:09.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-24T21:26:09.000Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th style="text-align: right">Parâmetro</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>api_key</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Chave da API (disponível no seu dashboard)</td>
</tr>
<tr>
<td style="text-align: right"><strong>:transaction_id</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Identificador da transação previamente criada</td>
</tr>
<tr>
<td style="text-align: right"><strong>:id</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Identificador da regra de divisão</td>
</tr>
</tbody></table>
<h2 id='retornando-pagamentos-da-transacao'>Retornando pagamentos da transação</h1>
<blockquote>
<p>GET https://api.pagar.me/1/transactions/:transaction_id/payables</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.pagar.me/1/transactions/192669/payables <span class="se">\</span>
-d <span class="s1">'api_key=ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0'</span>
</code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight csharp"><code></code></pre>

<p>Retorna um array com objetos <code class="prettyprint">payable</code> informando os dados dos pagamentos referentes a uma transação.</p>

<blockquote>
<p>JSON Retornado (exemplo):</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payable"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">39000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">115</span><span class="p">,</span><span class="w">
    </span><span class="nt">"installment"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">192669</span><span class="p">,</span><span class="w">
    </span><span class="nt">"split_rule_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sr_ci87hce8o00083016bkniqems"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-07T03:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boleto"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-07T15:47:48.000Z"</span><span class="w">
</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payable"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1486</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">91000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"installment"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">192669</span><span class="p">,</span><span class="w">
    </span><span class="nt">"split_rule_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sr_ci87hce8o00093016fin8p6ll"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-07T03:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boleto"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-07T15:47:48.000Z"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th style="text-align: right">Parâmetro</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>api_key</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Chave da API (disponível no seu dashboard)</td>
</tr>
<tr>
<td style="text-align: right"><strong>:transaction_id</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Identificador da transação previamente criada</td>
</tr>
</tbody></table>
<h2 id='retornando-um-pagamento-da-transacao'>Retornando um pagamento da transação</h1>
<blockquote>
<p>GET https://api.pagar.me/1/transactions/:transaction_id/payables/:id</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.pagar.me/1/transactions/192669/payables/1485 <span class="se">\</span>
-d <span class="s1">'api_key=ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0'</span>
</code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight csharp"><code></code></pre>

<p>Retorna um objeto <code class="prettyprint">payable</code> informando os dados de um pagamento referente a uma determinada transação.</p>

<blockquote>
<p>JSON Retornado (exemplo):</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payable"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">39000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">115</span><span class="p">,</span><span class="w">
    </span><span class="nt">"installment"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">192669</span><span class="p">,</span><span class="w">
    </span><span class="nt">"split_rule_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sr_ci87hce8o00083016bkniqems"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-07T03:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boleto"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-07T15:47:48.000Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th style="text-align: right">Parâmetro</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>api_key</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Chave da API (disponível no seu dashboard)</td>
</tr>
<tr>
<td style="text-align: right"><strong>:transaction_id</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Identificador da transação previamente criada</td>
</tr>
<tr>
<td style="text-align: right"><strong>:id</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Identificador do objeto <code class="prettyprint">payable</code></td>
</tr>
</tbody></table>
<h2 id='retornando-uma-analise-antifraude'>Retornando uma análise antifraude</h1>
<blockquote>
<p>GET https://api.pagar.me/1/transactions/:transaction_id/antifraud_analyses/:id</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.pagar.me/1/transactions/314578/antifraud_analyses/913456 <span class="se">\</span>
-d <span class="s1">'api_key=ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0'</span>
</code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight csharp"><code></code></pre>

<p>Retorna uma análise antifraude específica realizada em uma transação.</p>

<blockquote>
<p>JSON Retornado (Exemplo)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"antifraud_analysis"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"score"</span><span class="p">:</span><span class="w"> </span><span class="s2">"score"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cost"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cost"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"status"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"date_created"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"date_updated"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th style="text-align: right">Parâmetro</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>api_key</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Chave da API (disponível no seu dashboard)</td>
</tr>
<tr>
<td style="text-align: right"><strong>:transaction_id</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">id da transação</td>
</tr>
<tr>
<td style="text-align: right"><strong>:id</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">id da análise previamente feita</td>
</tr>
</tbody></table>
<h2 id='retorna-todas-as-analises-antifraude'>Retorna todas as análises antifraude</h1>
<blockquote>
<p>GET https://api.pagar.me/1/transactions/:transaction_id/antifraud_analyses</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.pagar.me/1/transactions/314578/antifraud_analyses <span class="se">\</span>
-d <span class="s1">'api_key=ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0'</span>
</code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight csharp"><code></code></pre>

<p>Retorna todas as análises antifraude realizadas em uma transação.</p>

<blockquote>
<p>JSON Retornado (Exemplo)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"antifraud_analysis"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"score"</span><span class="p">:</span><span class="w"> </span><span class="s2">"score"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cost"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cost"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"status"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"date_created"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"date_updated"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th style="text-align: right">Parâmetro</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>api_key</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Chave da API (disponível no seu dashboard)</td>
</tr>
<tr>
<td style="text-align: right"><strong>:transaction_id</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">id da transação</td>
</tr>
</tbody></table>
<h2 id='notificando-cliente-sobre-boleto-a-ser-pago'>Notificando cliente sobre boleto a ser pago</h1>
<blockquote>
<p>POST https://api.pagar.me/1/transactions/:id/collect_payment</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.pagar.me/1/transactions/314578/collect_payment <span class="se">\</span>
-d <span class="s1">'api_key=ak_live_grXijQ4GicOa2BLGZrDRTR5qNQxJW0'</span> <span class="se">\</span>
-d <span class="s1">'email=seu@email.com'</span>
</code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight csharp"><code></code></pre>

<p>Envia o link de um boleto pendente para o cliente.</p>

<p><strong>OBS</strong>: Essa rota não funciona em ambiente de testes.</p>

<blockquote>
<p>JSON Retornado (Exemplo)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th style="text-align: right">Parâmetro</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>api_key</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Chave da API (disponível no seu dashboard)</td>
</tr>
<tr>
<td style="text-align: right"><strong>:id</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">id da transação</td>
</tr>
<tr>
<td style="text-align: right"><strong>email</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">email a ser enviado o link do boleto</td>
</tr>
</tbody></table>
<h2 id='capturando-uma-transacao-posteriormente'>Capturando uma transação posteriormente</h1>
<blockquote>
<p>POST https://api.pagar.me/1/transactions/:id/capture</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.pagar.me/1/transactions/314578/capture <span class="se">\</span>
-d <span class="s1">'api_key=ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'pagarme'</span>

<span class="no">PagarMe</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0"</span>

<span class="n">transaction</span> <span class="o">=</span> <span class="no">PagarMe</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="s2">"1234"</span><span class="p">)</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">capture</span><span class="p">({</span><span class="ss">:amount</span> <span class="o">=&gt;</span> <span class="mi">1000</span><span class="p">})</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
    <span class="k">require</span><span class="p">(</span><span class="s2">"pagarme-php/Pagarme.php"</span><span class="p">);</span>

    <span class="nx">Pagarme</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s2">"ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0"</span><span class="p">);</span>

    <span class="nv">$t</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PagarMe_Transaction</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
      <span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="mi">3100</span><span class="p">,</span>
      <span class="s2">"card_id"</span> <span class="o">=&gt;</span> <span class="s2">"card_ci6l9fx8f0042rt16rtb477gj"</span><span class="p">,</span>
      <span class="s2">"postback_url"</span> <span class="o">=&gt;</span> <span class="s2">"http://requestb.in/1ahq78t1"</span><span class="p">,</span>
      <span class="s2">"capture"</span> <span class="o">=&gt;</span> <span class="s2">"false"</span><span class="p">,</span>
      <span class="s2">"metadata"</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s2">"idProduto"</span> <span class="o">=&gt;</span> <span class="mi">13933139</span>
      <span class="p">)</span>
    <span class="p">));</span>

    <span class="nv">$t</span><span class="o">-&gt;</span><span class="na">charge</span><span class="p">();</span>

    <span class="nv">$t</span><span class="o">-&gt;</span><span class="na">capture</span><span class="p">(</span><span class="mi">3100</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<pre class="highlight csharp"><code></code></pre>

<p>Você pode capturar o valor de uma transação após a autorização desta, no prazo máximo de 5 dias após a autorização.</p>

<blockquote>
<p>JSON Retornado (Exemplo)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"authorized"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refuse_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acquirer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"acquirer_response_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"acquirer_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"development"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"authorization_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"132534"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"soft_descriptor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testeDeApi"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"tid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1425302906112"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"nsu"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1425302906112"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-02T13:28:25.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-02T13:28:26.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">130000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">184622</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postback_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://requestb.in/pkt7pgpk"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit_card"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"antifraud_score"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_barcode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_expiration_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"referer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api_key"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"189.8.94.42"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subscription_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card_ci6l9fx8f0042rt16rtb477gj"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-25T21:54:56.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-25T21:54:57.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mastercard"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Api Customer"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"first_digits"</span><span class="p">:</span><span class="w"> </span><span class="s2">"548045"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"last_digits"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3123"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"fingerprint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HSiLJan2nqwn"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"valid"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"nomeData"</span><span class="p">:</span><span class="w"> </span><span class="s2">"API Doc test"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"idData"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th style="text-align: right">Parâmetro</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>api_key</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Chave da API (disponível no seu dashboard)</td>
</tr>
<tr>
<td style="text-align: right"><strong>:id</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Id da transação a ser capturada</td>
</tr>
</tbody></table>
<h2 id='estorno-de-transacao'>Estorno de transação</h1>
<blockquote>
<p>POST https://api.pagar.me/1/transactions/:id/refund</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.pagar.me/1/transactions/314578/refund <span class="se">\</span>
-d <span class="s1">'api_key=ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0'</span>
</code></pre>
<pre class="highlight shell"><code><span class="c"># Estorno de transação paga com boleto bancário</span>

curl -X POST https://api.pagar.me/1/transactions/314578/refund <span class="se">\</span>
-d <span class="s1">'api_key=ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0'</span> <span class="se">\</span>
-d <span class="s1">'bank_account[bank_code]=111'</span> <span class="se">\</span>
-d <span class="s1">'bank_account[agencia]=1234'</span> <span class="se">\</span>
-d <span class="s1">'bank_account[conta]=09876'</span> <span class="se">\</span>
-d <span class="s1">'bank_account[conta_dv]=1'</span> <span class="se">\</span>
-d <span class="s1">'bank_account[document_number]=12312312312'</span> <span class="se">\</span>
-d <span class="s1">'bank_account[legal_name]=joao miranda'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'pagarme'</span>

<span class="no">PagarMe</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0"</span>

<span class="n">transaction</span> <span class="o">=</span> <span class="no">PagarMe</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="s2">"1234"</span><span class="p">)</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">refund</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
    <span class="k">require</span><span class="p">(</span><span class="s2">"pagarme-php/Pagarme.php"</span><span class="p">);</span>

    <span class="nx">Pagarme</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s2">"ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0"</span><span class="p">);</span>

    <span class="nv">$t</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PagarMe_Transaction</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
      <span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="mi">3100</span><span class="p">,</span>
      <span class="s2">"card_id"</span> <span class="o">=&gt;</span> <span class="s2">"card_ci6l9fx8f0042rt16rtb477gj"</span><span class="p">,</span>
      <span class="s2">"postback_url"</span> <span class="o">=&gt;</span> <span class="s2">"http://requestb.in/1ahq78t1"</span><span class="p">,</span>
      <span class="s2">"capture"</span> <span class="o">=&gt;</span> <span class="s2">"false"</span><span class="p">,</span>
      <span class="s2">"metadata"</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s2">"idProduto"</span> <span class="o">=&gt;</span> <span class="mi">13933139</span>
      <span class="p">)</span>
    <span class="p">));</span>

    <span class="nv">$t</span><span class="o">-&gt;</span><span class="na">charge</span><span class="p">();</span>

    <span class="nv">$t</span><span class="o">-&gt;</span><span class="na">refund</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</code></pre>
<pre class="highlight csharp"><code></code></pre>

<p>Essa rota é utilizada quando se deseja estornar uma transação, realizada por uma cobrança via cartão de crédito ou boleto bancário.</p>

<p>Em caso de estorno de uma transação realizada com cartão de crédito, apenas o <code class="prettyprint">id</code> da transação é necessário para efetivação do estorno.</p>

<p>Caso a compra tenha sido feita por boleto bancário, você precisará passar os dados da conta bancária que irá receber o valor estornado, ou o id desta conta, que pode ser gerada através da rota <code class="prettyprint">/bank_accounts</code>.  </p>

<blockquote>
<p>JSON Retornado - Estorno de Cartão de Crédito (Exemplo)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refuse_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acquirer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"acquirer_response_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"acquirer_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"development"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"authorization_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"634306"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"soft_descriptor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testeDeApi"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"tid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1425302928963"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"nsu"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1425302928963"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-02T13:28:48.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-02T13:37:56.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">130000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">184623</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postback_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://requestb.in/pkt7pgpk"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit_card"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"antifraud_score"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_barcode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_expiration_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"referer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api_key"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"189.8.94.42"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subscription_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card_ci6l9fx8f0042rt16rtb477gj"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-25T21:54:56.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-25T21:54:57.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mastercard"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Api Customer"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"first_digits"</span><span class="p">:</span><span class="w"> </span><span class="s2">"548045"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"last_digits"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3123"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"fingerprint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HSiLJan2nqwn"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"valid"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"nomeData"</span><span class="p">:</span><span class="w"> </span><span class="s2">"API Doc test"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"idData"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>JSON Retornado - Estorno de Boleto Bancário (Exemplo)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending_refund"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refuse_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acquirer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"acquirer_response_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"acquirer_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"development"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"authorization_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"soft_descriptor"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"tid"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"nsu"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-26T19:50:38.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-02T17:38:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">3100000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">184306</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">115</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postback_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://requestb.in/pkt7pgpk"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boleto"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"antifraud_score"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://pagar.me"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_barcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234 5678"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_expiration_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-13T03:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"referer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api_key"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"189.8.94.42"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subscription_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card_ci6l9fx8f0042rt16rtb477gj"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-25T21:54:56.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-25T21:54:57.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mastercard"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Api Customer"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"first_digits"</span><span class="p">:</span><span class="w"> </span><span class="s2">"548045"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"last_digits"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3123"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"fingerprint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HSiLJan2nqwn"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"valid"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th style="text-align: right">Parâmetro</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>api_key</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Chave da API (disponível no seu dashboard)</td>
</tr>
<tr>
<td style="text-align: right"><strong>:id</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">id da transação</td>
</tr>
<tr>
<td style="text-align: right"><strong>bank_account_id</strong><br> <span class="required">obrigatório*</span></td>
<td style="text-align: left">Se você tiver o id de uma conta previamente criada, você pode passar apenas seu id. Caso a conta ainda não exista, você pode <a href="#">criar uma conta</a> ou passar os dados da conta via parâmetros</td>
</tr>
<tr>
<td style="text-align: right"><strong>bank_code</strong><br> <span class="required">obrigatório*</span></td>
<td style="text-align: left">Dígitos que identificam cada banco. Confira a lista dos bancos <a href="http://www.febraban.org.br/arquivo/bancos/sitebancos2-0.asp">aqui</a></td>
</tr>
<tr>
<td style="text-align: right"><strong>agencia</strong><br> <span class="required">obrigatório*</span></td>
<td style="text-align: left">Número da agência bancária</td>
</tr>
<tr>
<td style="text-align: right"><strong>agencia_dv</strong></td>
<td style="text-align: left">Digito verificador da agência. Obrigatório caso o banco o utilize</td>
</tr>
<tr>
<td style="text-align: right"><strong>conta</strong><br> <span class="required">obrigatório*</span></td>
<td style="text-align: left">Número da conta</td>
</tr>
<tr>
<td style="text-align: right"><strong>conta_dv</strong><br> <span class="required">obrigatório*</span></td>
<td style="text-align: left">Dígito verificador da conta. Obrigatório caso o banco o utilize</td>
</tr>
<tr>
<td style="text-align: right"><strong>document_number</strong><br> <span class="required">obrigatório*</span></td>
<td style="text-align: left">CPF ou CNPJ do favorecido</td>
</tr>
<tr>
<td style="text-align: right"><strong>legal_name</strong><br> <span class="required">obrigatório*</span></td>
<td style="text-align: left">Nome/razão social do favorecido</td>
</tr>
</tbody></table>
<h2 id='estados-das-transacoes'>Estados das transações</h1>
<p>Quando uma transação é criada, ela inicialmente é retornada com o status <code class="prettyprint">processing</code>. Após ser processada, ela pode ter os seguintes status:</p>

<ul>
<li><code class="prettyprint">processing</code>: transação sendo processada.</li>
<li><code class="prettyprint">authorized</code>: transação autorizada. Cliente possui saldo na conta e este valor foi reservado para futura captura, que deve acontecer em no máximo 5 dias. Caso a transação não seja <strong>capturada</strong>, a autorização é cancelada automaticamente.</li>
<li><code class="prettyprint">paid</code>: transação paga (autorizada e capturada).</li>
<li><code class="prettyprint">refunded</code>: transação estornada.</li>
<li><code class="prettyprint">waiting-payment</code>: transação aguardando pagamento (status para transações criadas com boleto bancário).</li>
<li><code class="prettyprint">pending-refund</code>: transação paga com boleto aguardando para ser estornada.</li>
<li><code class="prettyprint">refused</code>: transação não autorizada.</li>
</ul>
<h2 id='calculando-pagamentos-parcelados'>Calculando Pagamentos Parcelados</h1>
<blockquote>
<p>GET https://api.pagar.me/1/transactions/calculate_installments_amount</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.pagar.me/1/transactions/calculate_installments_amount <span class="se">\</span>
-d <span class="s1">'api_key=ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0 \
-d '</span><span class="nv">max_installments</span><span class="o">=</span>3<span class="s1">' \
-d '</span><span class="nv">free_installments</span><span class="o">=</span>1<span class="s1">' \
-d '</span><span class="nv">interest_rate</span><span class="o">=</span>13<span class="s1">' \
-d '</span><span class="nv">amount</span><span class="o">=</span>1300<span class="s1">'
</span></code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'pagarme'</span>

<span class="no">PagarMe</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"ak_test_grXijQ4GicOa2BLGZrDRTR5qNQxJW0"</span>

<span class="n">installments_result</span> <span class="o">=</span> <span class="no">PagarMe</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">calculate_installments</span><span class="p">({</span>
    <span class="ss">amount: </span><span class="mi">10000</span><span class="p">,</span>
    <span class="ss">interest_rate: </span><span class="mi">0</span>
<span class="p">})</span>
</code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight csharp"><code></code></pre>

<p>Usada para calcular o valor de cada uma das parcelas de uma compra.</p>

<blockquote>
<p>JSON retornado (exemplo):</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"installment"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1300</span><span class="p">,</span><span class="w">
            </span><span class="nt">"installment_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1300</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"2"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"installment"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1615</span><span class="p">,</span><span class="w">
            </span><span class="nt">"installment_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">807</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"3"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"installment"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1757</span><span class="p">,</span><span class="w">
            </span><span class="nt">"installment_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">586</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th style="text-align: right">Parâmetro</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>api_key</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Chave da API (disponível no seu dashboard)</td>
</tr>
<tr>
<td style="text-align: right"><strong>max_installments</strong><br> <span class="required">obrigatório</span><br> default: <code class="prettyprint">12</code></td>
<td style="text-align: left">Valor máximo de parcelas</td>
</tr>
<tr>
<td style="text-align: right"><strong>free_installments</strong><br> default: <code class="prettyprint">1</code></td>
<td style="text-align: left">Número de parcelas isentas de juros</td>
</tr>
<tr>
<td style="text-align: right"><strong>interest_rate</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Valor da taxa de juros</td>
</tr>
<tr>
<td style="text-align: right"><strong>amount</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Valor do produto/serviço vendido</td>
</tr>
</tbody></table>
<h2 id='testando-pagamento-de-boletos'>Testando pagamento de Boletos</h1>
<blockquote>
<p>PUT https://api.pagar.me/1/transactions/:id</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PUT https://api.pagar.me/1/transactions/260582 <span class="se">\</span>
-d <span class="s1">'api_key=ak_test_3343DSY7DWVzOXSz3xjvzIpBME4afc'</span> <span class="se">\</span>
-d <span class="s1">'status=paid'</span>
</code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight csharp"><code></code></pre>

<p>Usado <strong>apenas em ambiente de Teste</strong> para simular o pagamento de um Boleto.</p>

<blockquote>
<p>JSON retornado (exemplo):</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:</span><span class="s2">"transaction"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refuse_reason"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status_reason"</span><span class="p">:</span><span class="s2">"acquirer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"acquirer_response_code"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"acquirer_name"</span><span class="p">:</span><span class="s2">"development"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"authorization_code"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"soft_descriptor"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"tid"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"nsu"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="s2">"2015-08-27T17:53:56.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date_updated"</span><span class="p">:</span><span class="s2">"2015-08-27T18:01:24.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="mi">25000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"installments"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">260582</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cost"</span><span class="p">:</span><span class="mi">380</span><span class="p">,</span><span class="w">
    </span><span class="nt">"card_holder_name"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"card_last_digits"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"card_first_digits"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"card_brand"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postback_url"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="s2">"boleto"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"antifraud_score"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_url"</span><span class="p">:</span><span class="s2">"https://pagar.me"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_barcode"</span><span class="p">:</span><span class="s2">"1234 5678"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"boleto_expiration_date"</span><span class="p">:</span><span class="s2">"2015-09-03T03:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"referer"</span><span class="p">:</span><span class="s2">"api_key"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ip"</span><span class="p">:</span><span class="s2">"180.185.133.109"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subscription_id"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"card"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"metadata"</span><span class="p">:{</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"antifraud_metadata"</span><span class="p">:{</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th style="text-align: right">Parâmetro</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>api_key</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Chave da API (disponível no seu dashboard)</td>
</tr>
<tr>
<td style="text-align: right"><strong>status</strong><br> <span class="required">obrigatório</span></td>
<td style="text-align: left">Utilize o valor <strong>paid</strong> para simular o pagamento</td>
</tr>
</tbody></table>

          <h1 id='errors'>Errors</h1>
<aside class="notice">This error section is stored in a separate file in `includes/_errors.md`. Slate allows you to optionally separate out your docs into many files&hellip;just save them to the `includes` folder and add them to the top of your `index.md`&rsquo;s frontmatter. Files are included in the order listed.</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request sucks</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The kitten requested is hidden for administrators only</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified kitten could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a kitten with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json</td>
</tr>
<tr>
<td>410</td>
<td>Gone &ndash; The kitten requested has been removed from our servers</td>
</tr>
<tr>
<td>418</td>
<td>I&rsquo;m a teapot</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="csharp">csharp</a>
          </div>
      </div>
    </div>
  </body>
</html>
